import{m as a,q as oe,o as ie,s as se,T as ae,z as ce,a as le,c as D,i as K,p as ue}from"./vendor.24cce9d5.js";const de=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}};de();const fe="modulepreload",V={},he="/kata-clusters/",me=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${he}${r}`,r in V)return;V[r]=!0;const s=r.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${o}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":fe,s||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),s)return new Promise((d,y)=>{u.addEventListener("load",d),u.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};a.object({id:a.string(),name:a.string(),approved:a.boolean(),tags:a.array(a.string())});const pe=a.object({id:a.string(),name:a.string(),group:a.number(),index:a.number(),x:a.number(),y:a.number()}),ge=a.object({width:a.number().int(),height:a.number().int(),nodes:a.array(a.tuple([a.string(),a.string(),a.number().int(),a.number().int(),a.number().int()])),links:a.array(a.tuple([a.number().int(),a.number().int()]))}),ye=a.object({nodes:a.array(pe),links:a.array(a.tuple([a.number().int(),a.number().int()])),maxX:a.number(),maxY:a.number()}),ve=[113/255,113/255,122/255,.1];class xe{constructor(t){this.canvas=t;const n=t.getContext("webgl2");this.gl=n;const r=Se(n,we,be);this.program=r;const s=n.getAttribLocation(r,"a_position");this.positionBuffer=n.createBuffer(),this.vao=n.createVertexArray(),n.bindVertexArray(this.vao),n.enableVertexAttribArray(s),n.bindBuffer(n.ARRAY_BUFFER,this.positionBuffer),n.vertexAttribPointer(s,2,n.FLOAT,!1,0,0),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA)}clear(){const t=this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}drawLinks(t,n,r,s){this.clear();const o=this.gl;o.useProgram(this.program),o.bindVertexArray(this.vao),o.uniform2f(o.getUniformLocation(this.program,"u_resolution"),o.canvas.width,o.canvas.height),o.uniformMatrix3fv(o.getUniformLocation(this.program,"u_matrix"),!1,[s,0,0,0,s,0,n,r,1]),o.bindBuffer(o.ARRAY_BUFFER,this.positionBuffer),o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW),o.uniform4fv(o.getUniformLocation(this.program,"u_color"),ve),o.lineWidth(s),o.drawArrays(o.LINES,0,t.length/2)}}const we=`#version 300 es
// X, Y coordinates
in vec2 a_position;
// The resolution of the canvas
uniform vec2 u_resolution;
// The transform matrix.
uniform mat3 u_matrix;

void main() {
  vec2 position = (u_matrix * vec3(a_position, 1)).xy;
  vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;
  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
}
`,be=`#version 300 es
precision highp float;
uniform vec4 u_color;
out vec4 outColor;

void main() {
  outColor = u_color;
}
`;function Se(c,t,n){const r=c.createProgram();if(c.attachShader(r,Y(c,t,c.VERTEX_SHADER)),c.attachShader(r,Y(c,n,c.FRAGMENT_SHADER)),c.linkProgram(r),!c.getProgramParameter(r,c.LINK_STATUS))throw new Error(`Failed to link program: ${c.getProgramInfoLog(r)}`);return r}function Y(c,t,n){const r=c.createShader(n);if(c.shaderSource(r,t),c.compileShader(r),!c.getShaderParameter(r,c.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(r)}`);return r}const _=1,G=6,H=4,q="#18181B",ke=c=>c.group===_?c.id:c.name;function _e(c){const{nodes:t,links:n,maxX:r,maxY:s}=ye.parse(c),o=oe(t,e=>e.x,e=>e.y),u=[];for(let e=0;e<t.length;++e)u[e]=new Set;for(const[e,i]of n)u[e].add(i);let d=null;const y=new Set;let w=null;const I=ie(se(t.map(e=>e.group)),ae);let f=K;const N=X(),O=le("#ui-canvas").call(N).on("mousemove",F(ne,50)).on("click",Z).on("auxclick",ee);document.addEventListener("keydown",te),window.addEventListener("resize",F($,500));const v=document.getElementById("canvas"),m=v.getContext("2d"),b=O.node(),p=b.getContext("2d"),U=document.getElementById("links"),E=new xe(U);$();function z(){const e=Math.min(v.width/r,v.height/s)*.8,[i,l]=[(v.width-e*r)/2,(v.height-e*s)/2];O.transition().duration(250).call(N.transform,K.translate(i,l).scale(e))}function L(e,i,l){e.width=i,e.height=l,e.style.width=i,e.style.height=l}function $(){const e=window.innerWidth,i=window.innerHeight;L(b,e,i),L(v,e,i),E.clear(),L(U,e,i),z()}function X(){return ce().scaleExtent([1/8,4]).on("zoom",F(e=>{f=e.transform,R()},50))}function j(){const[e,i]=f.invert([0,0]),[l,x]=f.invert([v.width,v.height]),h=new Set;return o.visit((g,S,B,A,re)=>{if(!g.length)do{const k=g.data;k.x>=e&&k.x<l&&k.y>=i&&k.y<x&&h.add(k.index)}while(g=g.next);return S>=l||B>=x||A<e||re<i}),h}function R(){const e=j();m.save(),E.clear(),m.clearRect(0,0,v.width,v.height),m.fillStyle=q,m.translate(f.x,f.y),m.scale(f.k,f.k);const i=[];n.forEach(([l,x])=>{const h=t[l],g=t[x];if(!(!e.has(h.index)&&!e.has(g.index))){if(d){if(h.id!==d.id&&g.id!=d.id)return;y.add(g.index)}i.push(h.x,h.y,g.x,g.y)}}),E.drawLinks(i,f.x,f.y,f.k),t.forEach(l=>{if(!e.has(l.index)||!J(l))return;m.beginPath();const x=l.group===_?G:H;m.moveTo(l.x+x,l.y),m.arc(l.x,l.y,x,0,2*Math.PI);const h=D(I(l.group));m.fillStyle=h,m.fill(),m.strokeStyle=h.darker(),m.stroke()}),m.restore(),T()}function T(){if(p.save(),p.clearRect(0,0,b.width,b.height),p.translate(f.x,f.y),p.scale(f.k,f.k),w){const e=w;p.beginPath();const i=e.group===_?G:H;p.moveTo(e.x+i,e.y),p.arc(e.x,e.y,i,0,2*Math.PI);const l=D(I(e.group));p.fillStyle=l,p.strokeStyle=l.brighter(),p.fill(),p.stroke(),W(p,ke(e),e.x+8,e.y,Math.max(Math.round(16/f.k),1),l)}p.restore()}function W(e,i,l,x,h,g){e.save(),e.font=`${h}px sans-serif`,e.textBaseline="middle",e.fillStyle=q;const S=h/4,B=e.measureText(i).width+S,A=h+S;e.fillRect(l-S/2,x-A/2-S/2,B,A),e.fillStyle=g,e.fillText(i,l,x),e.restore()}function C(e){const[i,l]=f.invert(ue(e));return o.find(i,l,200)}function P(e){return d&&e&&!y.has(e.index)?null:e}function J(e){return!d||y.has(e.index)?!0:e.index!==d.index&&!u[e.index].has(d.index)?!1:(y.add(e.index),!0)}function Q(e){d=e,y.clear(),R()}function Z(e){const i=P(C(e));if(!!i){if(i.group!==_&&(e.ctrlKey||e.metaKey))return M(i.id);Q(d===i?null:i)}}function ee(e){const i=P(C(e));i.group!==_&&M(i.id)}function M(e){window.open(`https://www.codewars.com/kata/${e}`,"_blank")}function te(e){e.key==="Escape"&&d&&(d=null,y.clear(),R())}function ne(e){const i=P(C(e));i?(w!==i&&(w=i,T()),b.style.cursor="pointer"):(b.style.cursor="move",w!=null&&(w=null,T()))}}function F(c,t){let n=null,r,s;return function(){return s=this,r=Array.prototype.slice.call(arguments),d(),n=setTimeout(u,t),n;function u(){d(),c.apply(s,r)}function d(){clearTimeout(n),n=null}}}me(()=>import("./computed.0010158c.js"),[]).then(c=>{const t=ge.parse(c),n=t.nodes.map(([r,s,o,u,d],y)=>({id:r,name:s||r,group:o,x:u,y:d,index:y}));_e({nodes:n,links:t.links,maxX:t.width,maxY:t.height})});
