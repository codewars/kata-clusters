import{m as o,q as oe,o as ie,s as se,T as ae,z as ce,a as le,c as D,i as K,p as ue}from"./vendor.24cce9d5.js";const de=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function i(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(a){if(a.ep)return;a.ep=!0;const l=i(a);fetch(a.href,l)}};de();const fe="modulepreload",M={},he="/kata-clusters/",me=function(n,i){return!i||i.length===0?n():Promise.all(i.map(t=>{if(t=`${he}${t}`,t in M)return;M[t]=!0;const a=t.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":fe,a||(u.as="script",u.crossOrigin=""),u.href=t,document.head.appendChild(u),a)return new Promise((d,y)=>{u.addEventListener("load",d),u.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>n())};o.object({id:o.string(),name:o.string(),approved:o.boolean(),tags:o.array(o.string())});const pe=o.object({id:o.string(),name:o.string(),group:o.number(),index:o.number(),x:o.number(),y:o.number()}),ge=o.object({width:o.number().int(),height:o.number().int(),nodes:o.array(o.tuple([o.string(),o.string(),o.number().int(),o.number().int(),o.number().int()])),links:o.array(o.tuple([o.number().int(),o.number().int()]))}),ye=o.object({nodes:o.array(pe),links:o.array(o.tuple([o.number().int(),o.number().int()])),maxX:o.number(),maxY:o.number()}),ve=[113/255,113/255,122/255,.2];class xe{constructor(n){this.canvas=n;const i=n.getContext("webgl2",{premultipliedAlpha:!1});this.gl=i;const t=ke(i,we,be);this.program=t;const a=i.getAttribLocation(t,"a_position");this.positionBuffer=i.createBuffer(),this.vao=i.createVertexArray(),i.bindVertexArray(this.vao),i.enableVertexAttribArray(a),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.vertexAttribPointer(a,2,i.FLOAT,!1,0,0)}clear(){const n=this.gl;n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)}drawLinks(n,i=.5){this.clear();const t=this.gl;t.useProgram(this.program),t.bindVertexArray(this.vao),t.uniform2f(t.getUniformLocation(this.program,"u_resolution"),t.canvas.width,t.canvas.height),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.uniform4fv(t.getUniformLocation(this.program,"u_color"),ve),t.lineWidth(i),t.drawArrays(t.LINES,0,n.length/2)}}const we=`#version 300 es
// X, Y coordinates
in vec2 a_position;
// The resolution of the canvas
uniform vec2 u_resolution;

void main() {
  vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;
  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
}
`,be=`#version 300 es
precision highp float;
uniform vec4 u_color;
out vec4 outColor;

void main() {
  outColor = u_color;
}
`;function ke(s,n,i){const t=s.createProgram();if(s.attachShader(t,V(s,n,s.VERTEX_SHADER)),s.attachShader(t,V(s,i,s.FRAGMENT_SHADER)),s.linkProgram(t),!s.getProgramParameter(t,s.LINK_STATUS))throw new Error(`Failed to link program: ${s.getProgramInfoLog(t)}`);return t}function V(s,n,i){const t=s.createShader(i);if(s.shaderSource(t,n),s.compileShader(t),!s.getShaderParameter(t,s.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${s.getShaderInfoLog(t)}`);return t}const A=1,X=6,G=4,q="#18181B",Se=s=>s.group===A?s.id:s.name;function Ae(s){const{nodes:n,links:i,maxX:t,maxY:a}=ye.parse(s),l=oe(n,e=>e.x,e=>e.y),u=[];for(let e=0;e<n.length;++e)u[e]=new Set;for(const[e,r]of i)u[e].add(r);let d=null;const y=new Set;let w=null;const I=ie(se(n.map(e=>e.group)),ae);let f=K;const N=j(),O=le("#ui-canvas").call(N).on("mousemove",F(ne,50)).on("click",Z).on("auxclick",ee);document.addEventListener("keydown",te),window.addEventListener("resize",F($,500));const v=document.getElementById("canvas"),m=v.getContext("2d"),b=O.node(),p=b.getContext("2d"),U=document.getElementById("links"),E=new xe(U);$();function z(){const e=Math.min(v.width/t,v.height/a)*.8,[r,c]=[(v.width-e*t)/2,(v.height-e*a)/2];O.transition().duration(250).call(N.transform,K.translate(r,c).scale(e))}function T(e,r,c){e.width=r,e.height=c,e.style.width=r,e.style.height=c}function $(){const e=window.innerWidth,r=window.innerHeight;T(b,e,r),T(v,e,r),E.clear(),T(U,e,r),z()}function j(){return ce().scaleExtent([1/8,4]).on("zoom",F(e=>{f=e.transform,R()},50))}function H(){const[e,r]=f.invert([0,0]),[c,x]=f.invert([v.width,v.height]),h=new Set;return l.visit((g,k,B,_,re)=>{if(!g.length)do{const S=g.data;S.x>=e&&S.x<c&&S.y>=r&&S.y<x&&h.add(S.index)}while(g=g.next);return k>=c||B>=x||_<e||re<r}),h}function R(){const e=H();m.save(),E.clear(),m.clearRect(0,0,v.width,v.height),m.fillStyle=q,m.translate(f.x,f.y),m.scale(f.k,f.k);const r=[];i.forEach(([c,x])=>{const h=n[c],g=n[x];if(!(!e.has(h.index)&&!e.has(g.index))){if(d){if(h.id!==d.id&&g.id!=d.id)return;y.add(g.index)}r.push(f.applyX(h.x),f.applyY(h.y),f.applyX(g.x),f.applyY(g.y))}}),E.drawLinks(r,f.k/2),n.forEach(c=>{if(!e.has(c.index)||!J(c))return;m.beginPath();const x=c.group===A?X:G;m.moveTo(c.x+x,c.y),m.arc(c.x,c.y,x,0,2*Math.PI);const h=D(I(c.group));m.fillStyle=h,m.fill(),m.strokeStyle=h.darker(),m.stroke()}),m.restore(),L()}function L(){if(p.save(),p.clearRect(0,0,b.width,b.height),p.translate(f.x,f.y),p.scale(f.k,f.k),w){const e=w;p.beginPath();const r=e.group===A?X:G;p.moveTo(e.x+r,e.y),p.arc(e.x,e.y,r,0,2*Math.PI);const c=D(I(e.group));p.fillStyle=c,p.strokeStyle=c.brighter(),p.fill(),p.stroke(),W(p,Se(e),e.x+8,e.y,Math.max(Math.round(16/f.k),1),c)}p.restore()}function W(e,r,c,x,h,g){e.save(),e.font=`${h}px sans-serif`,e.textBaseline="middle",e.fillStyle=q;const k=h/4,B=e.measureText(r).width+k,_=h+k;e.fillRect(c-k/2,x-_/2-k/2,B,_),e.fillStyle=g,e.fillText(r,c,x),e.restore()}function C(e){const[r,c]=f.invert(ue(e));return l.find(r,c,200)}function P(e){return d&&e&&!y.has(e.index)?null:e}function J(e){return!d||y.has(e.index)?!0:e.index!==d.index&&!u[e.index].has(d.index)?!1:(y.add(e.index),!0)}function Q(e){d=e,y.clear(),R()}function Z(e){const r=P(C(e));if(!!r){if(r.group!==A&&(e.ctrlKey||e.metaKey))return Y(r.id);Q(d===r?null:r)}}function ee(e){const r=P(C(e));r.group!==A&&Y(r.id)}function Y(e){window.open(`https://www.codewars.com/kata/${e}`,"_blank")}function te(e){e.key==="Escape"&&d&&(d=null,y.clear(),R())}function ne(e){const r=P(C(e));r?(w!==r&&(w=r,L()),b.style.cursor="pointer"):(b.style.cursor="move",w!=null&&(w=null,L()))}}function F(s,n){let i=null,t,a;return function(){return a=this,t=Array.prototype.slice.call(arguments),d(),i=setTimeout(u,n),i;function u(){d(),s.apply(a,t)}function d(){clearTimeout(i),i=null}}}me(()=>import("./computed.0010158c.js"),[]).then(s=>{const n=ge.parse(s),i=n.nodes.map(([t,a,l,u,d],y)=>({id:t,name:a||t,group:l,x:u,y:d,index:y}));Ae({nodes:i,links:n.links,maxX:n.width,maxY:n.height})});
