import{m as i,q as oe,o as ie,s as se,T as ae,z as ce,a as le,c as M,i as Y,p as ue}from"./vendor.24cce9d5.js";const de=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}};de();const fe="modulepreload",K={},he="/kata-clusters/",me=function(n,r){return!r||r.length===0?n():Promise.all(r.map(t=>{if(t=`${he}${t}`,t in K)return;K[t]=!0;const a=t.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":fe,a||(u.as="script",u.crossOrigin=""),u.href=t,document.head.appendChild(u),a)return new Promise((d,y)=>{u.addEventListener("load",d),u.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${t}`)))})})).then(()=>n())};i.object({id:i.string(),name:i.string(),approved:i.boolean(),tags:i.array(i.string())});const pe=i.object({id:i.string(),name:i.string(),group:i.number(),index:i.number(),x:i.number(),y:i.number()}),ge=i.object({width:i.number().int(),height:i.number().int(),nodes:i.array(i.tuple([i.string(),i.string(),i.number().int(),i.number().int(),i.number().int()])),links:i.array(i.tuple([i.number().int(),i.number().int()]))}),ye=i.object({nodes:i.array(pe),links:i.array(i.tuple([i.number().int(),i.number().int()])),maxX:i.number(),maxY:i.number()}),ve=[113/255,113/255,122/255,.1];class xe{constructor(n){this.canvas=n;const r=n.getContext("webgl2");this.gl=r;const t=Se(r,we,be);this.program=t;const a=r.getAttribLocation(t,"a_position");this.positionBuffer=r.createBuffer(),this.vao=r.createVertexArray(),r.bindVertexArray(this.vao),r.enableVertexAttribArray(a),r.bindBuffer(r.ARRAY_BUFFER,this.positionBuffer),r.vertexAttribPointer(a,2,r.FLOAT,!1,0,0),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA)}clear(){const n=this.gl;n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)}drawLinks(n,r=.5){this.clear();const t=this.gl;t.useProgram(this.program),t.bindVertexArray(this.vao),t.uniform2f(t.getUniformLocation(this.program,"u_resolution"),t.canvas.width,t.canvas.height),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.uniform4fv(t.getUniformLocation(this.program,"u_color"),ve),t.lineWidth(r),t.drawArrays(t.LINES,0,n.length/2)}}const we=`#version 300 es
// X, Y coordinates
in vec2 a_position;
// The resolution of the canvas
uniform vec2 u_resolution;

void main() {
  vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;
  gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);
}
`,be=`#version 300 es
precision highp float;
uniform vec4 u_color;
out vec4 outColor;

void main() {
  outColor = u_color;
}
`;function Se(s,n,r){const t=s.createProgram();if(s.attachShader(t,V(s,n,s.VERTEX_SHADER)),s.attachShader(t,V(s,r,s.FRAGMENT_SHADER)),s.linkProgram(t),!s.getProgramParameter(t,s.LINK_STATUS))throw new Error(`Failed to link program: ${s.getProgramInfoLog(t)}`);return t}function V(s,n,r){const t=s.createShader(r);if(s.shaderSource(t,n),s.compileShader(t),!s.getShaderParameter(t,s.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${s.getShaderInfoLog(t)}`);return t}const _=1,X=6,G=4,H="#18181B",ke=s=>s.group===_?s.id:s.name;function _e(s){const{nodes:n,links:r,maxX:t,maxY:a}=ye.parse(s),l=oe(n,e=>e.x,e=>e.y),u=[];for(let e=0;e<n.length;++e)u[e]=new Set;for(const[e,o]of r)u[e].add(o);let d=null;const y=new Set;let w=null;const I=ie(se(n.map(e=>e.group)),ae);let f=Y;const N=z(),O=le("#ui-canvas").call(N).on("mousemove",F(ne,50)).on("click",Z).on("auxclick",ee);document.addEventListener("keydown",te),window.addEventListener("resize",F($,500));const v=document.getElementById("canvas"),m=v.getContext("2d"),b=O.node(),p=b.getContext("2d"),U=document.getElementById("links"),E=new xe(U);$();function q(){const e=Math.min(v.width/t,v.height/a)*.8,[o,c]=[(v.width-e*t)/2,(v.height-e*a)/2];O.transition().duration(250).call(N.transform,Y.translate(o,c).scale(e))}function L(e,o,c){e.width=o,e.height=c,e.style.width=o,e.style.height=c}function $(){const e=window.innerWidth,o=window.innerHeight;L(b,e,o),L(v,e,o),E.clear(),L(U,e,o),q()}function z(){return ce().scaleExtent([1/8,4]).on("zoom",F(e=>{f=e.transform,R()},50))}function j(){const[e,o]=f.invert([0,0]),[c,x]=f.invert([v.width,v.height]),h=new Set;return l.visit((g,S,B,A,re)=>{if(!g.length)do{const k=g.data;k.x>=e&&k.x<c&&k.y>=o&&k.y<x&&h.add(k.index)}while(g=g.next);return S>=c||B>=x||A<e||re<o}),h}function R(){const e=j();m.save(),E.clear(),m.clearRect(0,0,v.width,v.height),m.fillStyle=H,m.translate(f.x,f.y),m.scale(f.k,f.k);const o=[];r.forEach(([c,x])=>{const h=n[c],g=n[x];if(!(!e.has(h.index)&&!e.has(g.index))){if(d){if(h.id!==d.id&&g.id!=d.id)return;y.add(g.index)}o.push(f.applyX(h.x),f.applyY(h.y),f.applyX(g.x),f.applyY(g.y))}}),E.drawLinks(o,f.k/2),n.forEach(c=>{if(!e.has(c.index)||!J(c))return;m.beginPath();const x=c.group===_?X:G;m.moveTo(c.x+x,c.y),m.arc(c.x,c.y,x,0,2*Math.PI);const h=M(I(c.group));m.fillStyle=h,m.fill(),m.strokeStyle=h.darker(),m.stroke()}),m.restore(),T()}function T(){if(p.save(),p.clearRect(0,0,b.width,b.height),p.translate(f.x,f.y),p.scale(f.k,f.k),w){const e=w;p.beginPath();const o=e.group===_?X:G;p.moveTo(e.x+o,e.y),p.arc(e.x,e.y,o,0,2*Math.PI);const c=M(I(e.group));p.fillStyle=c,p.strokeStyle=c.brighter(),p.fill(),p.stroke(),W(p,ke(e),e.x+8,e.y,Math.max(Math.round(16/f.k),1),c)}p.restore()}function W(e,o,c,x,h,g){e.save(),e.font=`${h}px sans-serif`,e.textBaseline="middle",e.fillStyle=H;const S=h/4,B=e.measureText(o).width+S,A=h+S;e.fillRect(c-S/2,x-A/2-S/2,B,A),e.fillStyle=g,e.fillText(o,c,x),e.restore()}function C(e){const[o,c]=f.invert(ue(e));return l.find(o,c,200)}function P(e){return d&&e&&!y.has(e.index)?null:e}function J(e){return!d||y.has(e.index)?!0:e.index!==d.index&&!u[e.index].has(d.index)?!1:(y.add(e.index),!0)}function Q(e){d=e,y.clear(),R()}function Z(e){const o=P(C(e));if(!!o){if(o.group!==_&&(e.ctrlKey||e.metaKey))return D(o.id);Q(d===o?null:o)}}function ee(e){const o=P(C(e));o.group!==_&&D(o.id)}function D(e){window.open(`https://www.codewars.com/kata/${e}`,"_blank")}function te(e){e.key==="Escape"&&d&&(d=null,y.clear(),R())}function ne(e){const o=P(C(e));o?(w!==o&&(w=o,T()),b.style.cursor="pointer"):(b.style.cursor="move",w!=null&&(w=null,T()))}}function F(s,n){let r=null,t,a;return function(){return a=this,t=Array.prototype.slice.call(arguments),d(),r=setTimeout(u,n),r;function u(){d(),s.apply(a,t)}function d(){clearTimeout(r),r=null}}}me(()=>import("./computed.0010158c.js"),[]).then(s=>{const n=ge.parse(s),r=n.nodes.map(([t,a,l,u,d],y)=>({id:t,name:a||t,group:l,x:u,y:d,index:y}));_e({nodes:r,links:n.links,maxX:n.width,maxY:n.height})});
